{% extends "extend/base.html" %}

{% block content %}
	{% if user.is_authenticated %}
	<script>
		function get_userId()
		{
			return {{ user.id }};
		}
		function get_userName()
		{
			return '{{ user.username }}';
		}
	</script>
	{% csrf_token %}

	<div id="app" class="clearfix"></div>

	{% else %}
		{% if form.errors %}
		<p>Your username and password didn't match. Please try again.</p>
		{% endif %}

		<form class="form-signin" role="form" method="post" action="{% url 'login-user' %}">
			{% csrf_token %}
			<header>
				<h1>
					Jellyfish Reader
				</h1>
			</header>

			<div class="content">				
				<h5 class="form-signin-heading">Please Login</h5>
				<input id="id_username" class="form-control" maxlength="254" name="username" type="text" clickev="true" placeholder="Username" autofocus>
				
				<input id="id_password" class="form-control" name="password" type="password" clickev="true" placeholder=Password>

				<input id="id_password_again" class="form-control control-signup hidden" name="password_again" type="password" clickev="true" placeholder="Password (again)">

				<button type="submit" class="btn btn-default btn-success control-signin">Sign in</button>

				<button type="button" class="btn btn-signup">Sign up</button>

				<button type="button" class="btn btn-cancel control-signup" style="display:none">Cancel</button>

				<button class="btn control-signin">Forgot Password</button>
			</div>
		</form>

		<script src="{{ STATIC_URL }}js/vendor/jquery.min.js"></script>

		<script>
			function showSignup(){
				$(".btn-signup").addClass("btn-success");

				$(".control-signin").hide();
				$(".control-signup").show();

				$("#id_username").focus();
			}

			function hideSignup(){
				$(".btn-signup").removeClass("btn-success");

				$(".control-signin").show();
				$(".control-signup").hide();

				$("#id_username").focus();
			}

			$(function () {
				$("#id_username").focus();

				$(".btn-signup").click(function ( ) {
					showSignup();
				})

				$(".btn-cancel").click(function ( ) {
					hideSignup();
				})
			});
		</script>

	{% endif %}

{% endblock %}