{% extends "extend/base.html" %}

{% block content %}
	{% if user.is_authenticated %}
	<script>
		function get_userId()
		{
			return {{ user.id }};
		}
		function get_userName()
		{
			return '{{ user.username }}';
		}
	</script>
	{% csrf_token %}

	<div id="app" class="clearfix">
		
	</div>

	{% verbatim %}
		<script id="item-template" type="text/x-handlebars-template">
			<div js-item-link="{{url}}" class="subscription-explorer-node">
				<div class="clearfix">
					<div class="subscription-explorer-node-fav">
						<i class="fa fa-star-o button-favorite"></i>
					</div>
					<div class="subscription-explorer-node-title strong">
						{{title}}
					</div>
					<div class="subscription-explorer-node-time">
						<abbr class="timeago" title="{{published}}">{{published}}</abbr>
					</div>
				</div>
				<div class="subscription-explorer-node-content">
					{{{content}}}
				</div>	
			</div>
		</script>

		<script id="item-template-all" type="text/x-handlebars-template">
			<div js-item-link="{{url}}" class="subscription-explorer-node">
				<div class="clearfix">
					<div class="subscription-explorer-node-fav">
						<i class="fa fa-star-o button-favorite"></i>
					</div>
					<div class="subscription-explorer-node-subscription" style="color: {{subscriptionColor}} !important">
						{{subscriptionTitle}}
					</div>
					<div class="subscription-explorer-node-title">
						{{title}}
					</div>
					<div class="subscription-explorer-node-time">
						<abbr class="timeago" title="{{published}}">{{published}}</abbr>
					</div>
				</div>
			</div>
		</script>

		<script id="item-template-none" type="text/x-handlebars-template">
			<div class="subscription-explorer-node-none">	
				Nothing to see here! Check back soon!
			</div>
		</script>

		<script id="item-template-none" type="text/x-handlebars-template">
			<div class="subscription-explorer-node-none">	
				Nothing to see here! Check back soon!
			</div>
		</script>

		<script id="app-template" type="text/x-handlebars-template">			
			<div id="main" class="clearfix">
				<div id="sidebar" class="pull-left">
				</div>
				<div id="content" class="pull-left"></div>
			</div>
			<div id="modal"></div>
		</script>

		<script id="folder-template" type="text/x-handlebars-template">
			<div class='folder' js-folder-id="{{ id }}">
				{{ title }}
			</div>
		</script>

		<script id="subscription-template" type="text/x-handlebars-template">
		 	<div class='subscription' js-subscription-id="{{ id }}" js-subscription-title="{{ title }}">
                <img src="{{favicon_url}}" style="height: 16px; margin-right: 3px; width: 16px;" /> {{ title }}
            </div>
		</script>

		<script id="explorer-template" type="text/x-handlebars-template">
			<div id="explorer">
				<div class="subscription-header clearfix">
					<div class="strong pull-left" style="padding: 0 14px;">
						<h4 class="title strong"></h4>
					</div> 
					<div class="pull-right" style="padding: 12px;">
						<a href="#" class="control-link button-mark-all-read">Mark all as read</a> | 
						<a href="#" class="control-link">Unsubscribe</a>
					</div>
					<div class="pull-right color-picker">						
						<input class="input-color-picker" type="color" style='border:0' />
						<a href="#" class="control-link button-change-color">Change Color</a> | 
					</div>
				</div>
				<div class="feed"></div>
			</div>
		</script>

		<script id="controls-template" type="text/x-handlebars-template">
			<div id="controls" class="clearfix">
				<a href="#" class='button-add' title="Add Subscription"><i class="fa fa-plus"></i></a>
				<a href="#" class='button-settings' title="Account Settings"><i class="fa fa-cog"></i></a>
				<a href="#" class="button-logout" title="Logout"><i class="fa fa-sign-out"></i></a>
			</div>
		</script>

		<script id="sidebar-template" type="text/x-handlebars-template">
			<div class="sidebar">
				<header>
					<h1>
						Jellyfish Reader
					</h1>
					<div id="controls"></div>
				</header>
				<div class="sidebar-content">
				</div>
			</div>
		</script>

		<script id="settings-template" type="text/x-handlebars-template">
			<div id="window-settings" class="modal modal-settings">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			        <h4 class="modal-title">Settings</h4>
			      </div>
			      <div class="modal-body">
			        <div>Blacklist Words</div>
			        <div>Account Settings</div>
			        <div>Import/Export</div>
			      </div>
			      <div class="modal-footer">
		        	<a href="#" class="btn btn-success button-save">Save</a>
					<a href="#" class="btn btn-default button-cancel">Cancel</a>
			      </div>
			    </div><!-- /.modal-content -->
			  </div><!-- /.modal-dialog -->
			</div><!-- /.modal -->		
		</script>

		<script id="add-subscription-template" type="text/x-handlebars-template">
			<div id="window-add-subscription" class="modal modal-settings">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			        <h4 class="modal-title">Add New Subscription</h4>
			      </div>
			      <div class="modal-body">
			        <input type="text" class="form-control input-add-subscription"  placeholder="Enter RSS feed URL (http://)" />
			        <div class="alert alert-danger" style="display:none; margin-top: 10px">Please enter a valid URL!</div>
			      </div>
			      <div class="modal-footer">
		        	<a href="#" class="btn btn-success button-ok">Save</a>
					<a href="#" class="btn btn-default button-cancel">Cancel</a>
			      </div>
			    </div><!-- /.modal-content -->
			  </div><!-- /.modal-dialog -->
			</div><!-- /.modal -->		
		</script>
	{% endverbatim %}

	{% else %}
		{% if form.errors %}
		<p>Your username and password didn't match. Please try again.</p>
		{% endif %}

		<form class="form-signin" role="form" method="post" action="{% url 'login-user' %}">
			{% csrf_token %}
			<header>
				<h1>
					Jellyfish Reader
				</h1>
			</header>

			<script>
				$(function () {
					$("#id_username").focus();
				});
			</script>

			<div class="content">				
				<h5 class="form-signin-heading">Please Login</h5>
				<input id="id_username" class="form-control" maxlength="254" name="username" type="text" clickev="true" placeholder="Username" autofocus>
				
				<input id="id_password" class="form-control" name="password" type="password" clickev="true" placeholder=Password>
				<button type="submit" class="btn btn-default btn-success">Sign in</button>

				<button class="btn">Sign up</button>

				<button class="btn">Forgot Password</button>
			</div>
		</form>

	{% endif %}

{% endblock %}